# HTTP版本与HTTPS的相关知识点

首先是来讲述四个http版本的相关特点，然后再来讲述https的相关问题



http 0.9是第一个版本的http版本，无状态连接，短链接，只能实现get请求，同时只支持文字一种形式的内容，只能响应html这一种文字格式。



Http1.0相对于上一代http协议，内容大大扩充，

- 首先，任何格式的内容都可以发送。这使得互联网不仅可以传输文字，还能传输图像、视频、二进制文件。这为互联网的大发展奠定了基础。
- 其次，除了`GET`命令，还引入了`POST`命令和`HEAD`命令，丰富了浏览器与服务器的互动手段。
- 再次，HTTP请求和回应的格式也变了。除了数据部分，每次通信都必须包括头信息（HTTP header），用来描述一些元数据。

HTTP/1.0 版的主要缺点是，每个TCP连接只能发送一个请求。发送数据完毕，连接就关闭，如果还要请求其他资源，就必须再新建一个连接。但是tcp的三次握手建立连接的成本比较高，所以说我们每次进行通信都要进行一次三次握手和四次挥手的过程比较浪费时间。因此在下一代http协议中我们新增了connection这个字段，如果字段的value为keep-alive的话，我们就保持连接，如果为close的话，我们就关闭连接。



http1.1 的特点：

1.最大的特点就是持久连接的特性，也就是说tcp协议默认不关闭，可以多次复用，并且不用去生命connection:keep-alive，默认就是保持连接，如果要关闭连接，那么我们就在头部中加入connection:close.目前，对于同一个域名，大多数浏览器允许同时建立6个持久连接。

2.字节范围请求：http1.1支持传输内容的一部分。比方说当客户端已经又了内容的一部分，为了节省带宽，可以只想服务器发送一部分。该功能通过在请求消息中引入了range头域来实现，它允许只请求资源的某一部分。响应的时候响应码为206（Partial Content）

3.新增了一批方法，options，put，delete，trace，connect方法。

4.缓存处理上，HTTP/1.1 在HTTP/1.0基础上加入一些cache新特性。引入了实体标签，一般被称为etags，新增了更加强大的cache-control头部标签（max-age,no-cache,no-store）。

5.管道机制：HTTP1.1引入了管道机制，即在同一个HTTP连接中，客户端可以同时向服务端发送多个请求。

http1.1的问题：

HTTP1.1的持久化连接和管道机制允许服用TCP连接，在一个TCP连接中，也可以同时发送多个请求，但是所有的数据通信都是按照次序完成的，服务器只有处理完一个回应，才会处理下一个回应。这被称为“队头阻塞”。



http2.0的特点：

1.多路复用技术，通过单一的HTTP/2.0连接，发送多重请求-响应消息，即在一个连接里面，客户端和浏览器都可以同时发送多个请求和响应，而不用按照顺序一一响应，这样避免了“队头阻塞”。

2.二进制分帧：HTTP1.1的头部信息是文本（ASC2编码），数据体可以是二进制也可以是文本；HTTP/2头信息和数据体都是二进制，统称为“帧”：头信息帧和数据帧。

3.头部压缩：客户端与服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样的字段了，只发送所以号，这样就提高了速度。



HTTPS的工作原理：

HTTP的默认端口在80，然而HTTPS的默认端口在443。

SSL/TLS运行机制：基本思路是在建立连接的时候使用的是非对称加密算法，但是在正式进行通信的时候我们使用的是对称加密算法。

通信过程如下所示：

1.客户端发送请求：给出支持的协议版本、支持的加密算法（如RSA公钥加密）以及一个客户端生成的随机数。

2.服务端回应：确认双方通信的协议版本、加密方法，并给出服务器证书以及一个服务器生成的随机数。

3.客户端回应：客户端确认证书有效，取出证书中的公钥，然后生成一个新的随机数，并利用证书中的公钥进行加密该随机数，发送给服务端。

4.服务端回应：服务端使用自己的私钥解密客户端发来的消息，这个过程完全使用普通的HTTP版本，客户端与服务端之间使用约定好的加密算法，和三个随机数生成的密钥。







